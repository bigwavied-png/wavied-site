<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wavie D â€” Vault</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="vault-bg gold">

  <div class="vault-box">

    <h2 class="vault-title">VAULT LOCKED</h2>

    <p>
      Exclusive unreleased content<br />
      <strong>$20 access required</strong>
    </p>

    <!-- STRIPE PAYMENT LINK ONLY -->
   <button
  type="button"
  class="buy-btn"
  id="buyBtn">
  Buy Now
</button>
  </div>
<script>
document.getElementById("buyBtn").addEventListener("click", async (e) => {
  e.preventDefault();
  e.stopPropagation();

  try {
    const response = await fetch("/functions/api/create-checkout", {
      method: "POST"
    });

    const data = await response.json();

    if (!data.url) {
      alert("Stripe session failed");
      console.error(data);
      return;
    }

    window.location.assign(data.url);
  } catch (err) {
    console.error(err);
    alert("Checkout error");
  }
});
</script>
</body>
</html>
